<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Software Architucture &mdash; ros-moveit-opencv-ontology 1.0 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/graphviz.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Temporal Diagram (UML Sequence Diagram)" href="temporal_diagram.html" />
    <link rel="prev" title="Simulation Environment" href="simulation_environment.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> ros-moveit-opencv-ontology
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="simulation_environment.html">Simulation Environment</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Software Architucture</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#robot-urdf">robot URDF</a></li>
<li class="toctree-l2"><a class="reference internal" href="#robot-states">robot-states</a></li>
<li class="toctree-l2"><a class="reference internal" href="#marker-publisher">marker_publisher</a></li>
<li class="toctree-l2"><a class="reference internal" href="#marker-server">marker_server</a></li>
<li class="toctree-l2"><a class="reference internal" href="#move-group">move_group</a></li>
<li class="toctree-l2"><a class="reference internal" href="#move-base">move_base</a></li>
<li class="toctree-l2"><a class="reference internal" href="#slam-gmapping">slam_gmapping</a></li>
<li class="toctree-l2"><a class="reference internal" href="#finite-state-machin">finite state machin</a></li>
<li class="toctree-l2"><a class="reference internal" href="#armor-service">armor_service</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="temporal_diagram.html">Temporal Diagram (UML Sequence Diagram)</a></li>
<li class="toctree-l1"><a class="reference internal" href="scripts.html">Scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="src_files.html">Source Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage.html">Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_hypothesis.html">Working Hypothesis and Environment</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">ros-moveit-opencv-ontology</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Software Architucture</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/software_architecture.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="software-architucture">
<h1>Software Architucture<a class="headerlink" href="#software-architucture" title="Permalink to this heading"></a></h1>
<p>The software architucture is represented in the following figure.</p>
<a class="reference internal image-reference" href="_images/sofar.png"><img alt="sofar" class="align-center" src="_images/sofar.png" style="width: 1000px;" /></a>
<p>The components of this software architucture can be described as follows:</p>
<section id="robot-urdf">
<h2>robot URDF<a class="headerlink" href="#robot-urdf" title="Permalink to this heading"></a></h2>
<p>The robot URDF in this package consists of a mobile base link provided with two cylindrical wheels, caster front
and a manipulator with 5dof. This robot uses a laser scanner to detect the obstacles, and a camera for scanning
the provided markers.</p>
<a class="reference internal image-reference" href="_images/urdf.png"><img alt="robot_urdf" class="align-center" src="_images/urdf.png" style="width: 300px;" /></a>
</section>
<section id="robot-states">
<h2>robot-states<a class="headerlink" href="#robot-states" title="Permalink to this heading"></a></h2>
<p>In order to simulate the states of the robot and its stimulus, the approach presented in the
<a class="reference external" href="https://github.com/buoncubi/arch_skeleton">arch_skeleton</a> example is used with some changes
(e.g. battery level, base movement state).</p>
</section>
<section id="marker-publisher">
<h2>marker_publisher<a class="headerlink" href="#marker-publisher" title="Permalink to this heading"></a></h2>
<p>The image processing part is done using <a class="reference external" href="https://opencv.org/">OpenCV</a> with the method presented in
<a class="reference external" href="https://github.com/CarmineD8/aruco_ros">aruco_ros</a>. In order to convert between ROS Image
messages and OpenCV images, <a class="reference external" href="http://wiki.ros.org/cv_bridge">cv_bridge</a> package is used.</p>
</section>
<section id="marker-server">
<h2>marker_server<a class="headerlink" href="#marker-server" title="Permalink to this heading"></a></h2>
<p>Implemnts a service which responses the information for each room in the semantic map by getting
call request with argument indicationg the room id.</p>
</section>
<section id="move-group">
<h2>move_group<a class="headerlink" href="#move-group" title="Permalink to this heading"></a></h2>
<p>The controller node for robot manipulator arm. The package <code class="docutils literal notranslate"><span class="pre">my_moveit</span></code> which is auto generated by
<a class="reference external" href="https://moveit.ros.org/">MoveIt</a> for robot URDF, implements this node. It provides joint trajectory effort
controllers for robot arm in order to reach the desired joints configuration.</p>
</section>
<section id="move-base">
<h2>move_base<a class="headerlink" href="#move-base" title="Permalink to this heading"></a></h2>
<p>The node which is responsible for navigation. In this package, <a class="reference external" href="http://wiki.ros.org/move_base">move_base</a> node is
used for finding the path between robot current position and target room position. It also drives the robot
base link to move through the found path.</p>
</section>
<section id="slam-gmapping">
<h2>slam_gmapping<a class="headerlink" href="#slam-gmapping" title="Permalink to this heading"></a></h2>
<p><a class="reference external" href="http://wiki.ros.org/slam_gmapping">slam_gmapping</a> is a widely used ROS package for mapping purposes.
It uses robot laser scanner data along with robot base frame position in order to find robot in the map.
Since there is map file provided in this package, it generates the map in an online manner.</p>
</section>
<section id="finite-state-machin">
<h2>finite state machin<a class="headerlink" href="#finite-state-machin" title="Permalink to this heading"></a></h2>
<p>The main part of software architucture, defines the states and transitions for the finite state
machine of the robot behaviour. It is implemented using the method presented in <a class="reference external" href="http://wiki.ros.org/smach">smach</a>
It also uses <code class="docutils literal notranslate"><span class="pre">topological_map.py</span></code> helper script which is based on <a class="reference external" href="https://github.com/EmaroLab/armor">aRMOR</a>
to update the ontology while the process is running.</p>
<a class="reference internal image-reference" href="_images/fsm.png"><img alt="robot_urdf" class="align-center" src="_images/fsm.png" style="width: 300px;" /></a>
</section>
<section id="armor-service">
<h2>armor_service<a class="headerlink" href="#armor-service" title="Permalink to this heading"></a></h2>
<p>It is used for manipulating the ontology and getting information in a query throgh <code class="docutils literal notranslate"><span class="pre">finite_state_machine</span></code> node.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="simulation_environment.html" class="btn btn-neutral float-left" title="Simulation Environment" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="temporal_diagram.html" class="btn btn-neutral float-right" title="Temporal Diagram (UML Sequence Diagram)" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Ali Yousefi.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>